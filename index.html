<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Jesus Christ Redeems Global Ministries | Service Timer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#1f3c88">

<link rel="manifest" href="manifest.json">

<style>
body {
    font-family: "Segoe UI", Arial, sans-serif;
    background-color: #f4f6f8;
    margin: 0;
    color: #333;
}

header {
    background: linear-gradient(90deg, #1f3c88, #2c3e50);
    color: #fff;
    padding: 30px 20px;
    text-align: center;
}

button {
    padding: 10px 18px;
    border: none;
    background: #1f3c88;
    color: #fff;
    cursor: pointer;
    border-radius: 4px;
    margin: 10px;
}

.container {
    max-width: 1000px;
    margin: 30px auto;
    background: #fff;
    padding: 30px;
    box-shadow: 0 0 12px rgba(0,0,0,0.1);
}

.timer-box {
    background: #1f3c88;
    color: #fff;
    padding: 25px;
    font-size: 26px;
    text-align: center;
    border-radius: 6px;
    margin-bottom: 30px;
}

.timer-box span {
    color: #ffd700;
    font-weight: bold;
}

footer {
    background: #2c3e50;
    color: #fff;
    text-align: center;
    padding: 15px;
}

/* PROJECTOR MODE */
.projector header,
.projector footer,
.projector h2,
.projector .service-time {
    display: none;
}

.projector .timer-box {
    font-size: 36px;
}
</style>
</head>

<body>

<header>
<h1>Jesus Christ Redeems Global Ministries</h1>
<p id="serviceDate"></p>
<button onclick="toggleProjector()">Toggle Projector Mode</button>
</header>

<div class="container">
<div class="timer-box" id="timerBox">Loading‚Ä¶</div>

<div id="serviceContent">
<h2>Sunday Services Ongoing</h2>
<p class="service-time">Morning 09:00 ‚Äì 12:30 | Afternoon 15:00 ‚Äì 18:30</p>
</div>
</div>

<footer>
¬© <span id="year"></span> Jesus Christ Redeems Global Ministries
</footer>

<script>
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("service-worker.js");
}

const now = new Date();
const day = now.getDay();
const isSunday = day === 0;

document.getElementById("serviceDate").innerText =
"Today: " + now.toDateString();
document.getElementById("year").innerText = now.getFullYear();

if (isSunday) {
    document.documentElement.classList.add("projector");
}

function toggleProjector() {
    document.documentElement.classList.toggle("projector");
}

const scriptures = {
    1: "üìñ Psalm 1:1‚Äì2 ‚Äì Blessed is the man who delights in the law of the Lord.",
    2: "üìñ Isaiah 40:31 ‚Äì They that wait upon the Lord shall renew their strength.",
    3: "üìñ Proverbs 3:5‚Äì6 ‚Äì Trust in the Lord with all your heart.",
    4: "üìñ Matthew 11:28 ‚Äì Come unto me, all ye that labour.",
    5: "üìñ Hebrews 10:25 ‚Äì Not forsaking the assembling of ourselves together.",
    6: "üìñ Joshua 24:15 ‚Äì As for me and my house, we will serve the Lord."
};

function getNextSundayMorning() {
    const d = new Date();
    const days = (7 - d.getDay()) % 7 || 7;
    d.setDate(d.getDate() + days);
    d.setHours(9, 0, 0, 0);
    return d;
}

function getAfternoonService() {
    const d = new Date();
    d.setHours(15, 0, 0, 0);
    return d;
}

function formatCountdown(diff) {
    const d = Math.floor(diff / 86400);
    const h = Math.floor((diff % 86400) / 3600);
    const m = Math.floor((diff % 3600) / 60);
    const s = diff % 60;
    return `${d}d ${h}h ${m}m ${s}s`;
}

function updateDisplay() {
    const now = new Date();

    if (!isSunday) {
        document.getElementById("serviceContent").style.display = "none";
        const nextSunday = getNextSundayMorning();
        const diff = Math.floor((nextSunday - now) / 1000);

        document.getElementById("timerBox").innerHTML = `
        üåø <strong>Scripture for Meditation</strong><br><br>
        ${scriptures[day]}<br><br>
        ‚è≥ <strong>Countdown to Sunday Service</strong><br>
        <span>${formatCountdown(diff)}</span>
        `;
        return;
    }

    document.getElementById("serviceContent").style.display = "block";
    const afternoon = getAfternoonService();

    if (now < afternoon) {
        document.getElementById("timerBox").innerHTML = `
        üôè <strong>Sunday Morning Service Ongoing</strong><br><br>
        ‚è≥ Afternoon Service starts in<br>
        <span>${formatCountdown(Math.floor((afternoon - now) / 1000))}</span>
        `;
    } else {
        document.getElementById("timerBox").innerHTML = `
        üôå <strong>Sunday Afternoon Service Ongoing</strong><br><br>
        üî• Expect a move of God
        `;
    }
}

setInterval(updateDisplay, 1000);
updateDisplay();
</script>

</body>
</html>
