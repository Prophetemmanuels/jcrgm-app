<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Jesus Christ Redeems Global Ministries | Service Timer</title>

<!-- PWA manifest -->
<link rel="manifest" href="manifest.json">
<!-- iPhone / Apple touch icon -->
<link rel="apple-touch-icon" href="apple-touch-icon.png">

<meta name="theme-color" content="#1f3c88">

<style>
body {
    font-family: "Segoe UI", Arial, sans-serif;
    background-color: #f4f6f8;
    margin: 0;
    color: #333;
}

header {
    background: linear-gradient(90deg, #1f3c88, #2c3e50);
    color: #fff;
    padding: 30px 20px;
    text-align: center;
}

/* Buttons */
header button {
    padding: 10px 18px;
    border: none;
    background: #ffd700; /* Gold for toggle & programme button */
    color: #1f3c88;      /* Dark text for contrast */
    cursor: pointer;
    border-radius: 4px;
    margin: 10px 5px 0 5px;
    font-size: 16px;
    font-weight: bold;
}

header button:hover {
    background: #ffcc00; /* Hover effect */
}

/* Social buttons */
.youtube-btn {
    background: #FF0000;
    color: #fff;
}
.youtube-btn:hover {
    background: #cc0000;
}

.facebook-btn {
    background: #3b5998;
    color: #fff;
}
.facebook-btn:hover {
    background: #2d4373;
}

.container {
    max-width: 1000px;
    margin: 30px auto;
    background: #fff;
    padding: 30px;
    box-shadow: 0 0 12px rgba(0,0,0,0.1);
}

.timer-box {
    background: #1f3c88;
    color: #fff;
    padding: 25px;
    font-size: 26px;
    text-align: center;
    border-radius: 6px;
    margin-bottom: 30px;
}

.timer-box span {
    color: #ffd700;
    font-weight: bold;
}

.programme-box {
    background: #f1f1f1;
    padding: 20px;
    border-radius: 6px;
    margin-top: 20px;
    display: none;
}

.programme-box h3 {
    color: #1f3c88;
    margin-bottom: 15px;
}

.current-program {
    background: #fff3cd !important;
    font-weight: bold;
    border-left: 6px solid #e67e22;
}

footer {
    background: #2c3e50;
    color: #fff;
    text-align: center;
    padding: 15px;
}

/* PROJECTOR MODE */
.projector header,
.projector footer,
.projector h2,
.projector .service-time {
    display: none;
}

.projector .timer-box {
    font-size: 36px;
}
</style>
</head>

<body>

<header>
  <h1>Jesus Christ Redeems Global Ministries</h1>
  <p id="serviceDate"></p>

  <!-- Toggle button -->
  <button id="toggleBtn">Toggle Projector Mode</button>

  <!-- Social Links -->
  <div style="margin-top:15px;">
    <a href="https://www.youtube.com/@officialjcrgmtv" target="_blank">
      <button class="youtube-btn">YouTube</button>
    </a>
    <a href="https://web.facebook.com/pedahzurchurch/" target="_blank">
      <button class="facebook-btn">Facebook</button>
    </a>
  </div>

  <!-- Church Programme Button -->
  <div style="margin-top:15px;">
    <button id="programmeBtn">View Sunday Programme</button>
  </div>
</header>

<div class="container">

<div class="timer-box" id="timerBox">Loading‚Ä¶</div>

<div id="serviceContent">
<h2>Sunday Services Ongoing</h2>
<p class="service-time">Morning 09:00 ‚Äì 12:30 | Afternoon 15:00 ‚Äì 18:30</p>
</div>

<!-- Sunday Programme -->
<div class="programme-box" id="programmeBox">
  <h3>Sunday Service Programme</h3>
  <ul>
    <li>09:00 ‚Äì 09:30: Worship & Praise</li>
    <li>09:30 ‚Äì 10:15: Opening Prayer & Scripture Reading</li>
    <li>10:15 ‚Äì 11:00: Sermon</li>
    <li>11:00 ‚Äì 11:30: Testimonies</li>
    <li>11:30 ‚Äì 12:00: Special Announcements</li>
    <li>12:00 ‚Äì 12:30: Closing Prayer</li>
    <li>15:00 ‚Äì 15:30: Afternoon Worship & Praise</li>
    <li>15:30 ‚Äì 16:15: Afternoon Sermon</li>
    <li>16:15 ‚Äì 16:45: Prayer & Intercession</li>
    <li>16:45 ‚Äì 17:30: Fellowship & Ministry Updates</li>
    <li>17:30 ‚Äì 18:30: Evening Worship & Closing</li>
  </ul>
</div>

</div>

<footer>
¬© <span id="year"></span> Jesus Christ Redeems Global Ministries
</footer>

<script>
// Wait until DOM is loaded to attach events
document.addEventListener("DOMContentLoaded", function() {

    const toggleBtn = document.getElementById("toggleBtn");
    const programmeBtn = document.getElementById("programmeBtn");
    const programmeBox = document.getElementById("programmeBox");

    // Toggle Projector Mode
    toggleBtn.addEventListener("click", function() {
        document.documentElement.classList.toggle("projector");
    });

    // Show/hide Sunday Programme
    programmeBtn.addEventListener("click", function() {
        programmeBox.style.display = (programmeBox.style.display === "none" || programmeBox.style.display === "") ? "block" : "none";
    });

    // Initialize service timer and display
    const now = new Date();
    const day = now.getDay(); // 0 = Sunday
    const isSunday = day === 0;

    document.getElementById("serviceDate").innerText = "Today: " + now.toDateString();
    document.getElementById("year").innerText = now.getFullYear();

    if (isSunday) {
        document.documentElement.classList.add("projector");
    }

    const scriptures = {
        1: "üìñ Psalm 1:1‚Äì2 ‚Äì Blessed is the man who delights in the law of the Lord.",
        2: "üìñ Isaiah 40:31 ‚Äì They that wait upon the Lord shall renew their strength.",
        3: "üìñ Proverbs 3:5‚Äì6 ‚Äì Trust in the Lord with all your heart.",
        4: "üìñ Matthew 11:28 ‚Äì Come unto me, all ye that labour.",
        5: "üìñ Hebrews 10:25 ‚Äì Not forsaking the assembling of ourselves together.",
        6: "üìñ Joshua 24:15 ‚Äì As for me and my house, we will serve the Lord."
    };

    function getNextSundayMorning() {
        const d = new Date();
        const days = (7 - d.getDay()) % 7 || 7;
        d.setDate(d.getDate() + days);
        d.setHours(9, 0, 0, 0);
        return d;
    }

    function getAfternoonService() {
        const d = new Date();
        d.setHours(15, 0, 0, 0);
        return d;
    }

    function formatCountdown(diff) {
        const d = Math.floor(diff / 86400);
        const h = Math.floor((diff % 86400) / 3600);
        const m = Math.floor((diff % 3600) / 60);
        const s = diff % 60;
        return `${d}d ${h}h ${m}m ${s}s`;
    }

    function updateDisplay() {
        const now = new Date();

        // WEEKDAYS
        if (!isSunday) {
            document.getElementById("serviceContent").style.display = "none";
            const nextSunday = getNextSundayMorning();
            const diff = Math.floor((nextSunday - now) / 1000);

            document.getElementById("timerBox").innerHTML = `
            üåø <strong>Scripture for Meditation</strong><br><br>
            ${scriptures[day]}<br><br>
            ‚è≥ <strong>Countdown to Sunday Service</strong><br>
            <span>${formatCountdown(diff)}</span>
            `;
            return;
        }

        // SUNDAY
        document.getElementById("serviceContent").style.display = "block";

        const afternoon = getAfternoonService();

        if (now < afternoon) {
            const diff = Math.floor((afternoon - now) / 1000);
            document.getElementById("timerBox").innerHTML = `
            üôè <strong>Sunday Morning Service Ongoing</strong><br><br>
            ‚è≥ Afternoon Service starts in<br>
            <span>${formatCountdown(diff)}</span>
            `;
        } else {
            document.getElementById("timerBox").innerHTML = `
            üôå <strong>Sunday Afternoon Service Ongoing</strong><br><br>
            üî• Expect a move of God
            `;
        }
    }

    setInterval(updateDisplay, 1000);
    updateDisplay();

});
</script>

</body>
</html>
